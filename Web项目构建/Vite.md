# Vite介绍

## 概述

Vite是一个基于EsModule实现的Web应用开发工具

## 核心功能

- 静态文件服务器

- 冷启动

- 热更新HMR

  Vite只需要编译当前修改文件

  Webpack以这个文件为入口重写Build一次，所有涉及到的依赖也会加载一次

- 打包

  Vite是用rollup打包，且利用动态引入。

- 如何解决大量零散文件时请求多个HTTP请求的问题

## 思考

1. vite如何解决请求大量零散文件多次发送HTTP请求的问题

   - **代码拆分和按需加载**：

     Vite 会对代码进行拆分，将不同的功能模块分成单独的文件。这样，浏览器只需要按需加载必要的代码，而不是一次性加载整个应用。这可以减少 HTTP 请求的数量。

   - **打包和优化**：

     Vite 使用 Rollup 作为构建工具，将源代码打包为最终的输出文件。在打包过程中，Vite 会将相关的模块合并在一起，生成较少的输出文件，从而减少 HTTP 请求。此外，Vite 还会进行代码压缩和优化，以减小文件大小和提高加载性能。

   - **预渲染和懒加载**：

     Vite 支持预渲染和懒加载策略，可以进一步减少 HTTP 请求。预渲染会生成静态 HTML 文件，避免了运行时加载额外资源的需要。懒加载允许在需要时才加载特定资源，而不是在应用启动时一次性加载所有资源。

   - **缓存**：

     Vite 利用浏览器的缓存机制，只有在文件发生变化时才重新发起请求。这可以有效减少不必要的 HTTP 请求。

     1. **强缓存**：当文件被请求并加载到浏览器缓存后，Vite 会设置 HTTP 头部中的 `Cache-Control` 为 `max-age=31536000, immutable`，这意味着在一定时间内（1年），浏览器不会重新请求这些文件，除非文件名发生变化。这可以显著减少不必要的请求。
     2. **按需加载**：Vite 的开发服务器仅在需要时才加载特定的模块。这意味着只有在实际需要某个模块时，浏览器才会发起 HTTP 请求并将其加载到缓存中。这样可以减少在开发过程中的 HTTP 请求数量。
     3. **快速热更新**：Vite 的热更新机制仅针对修改过的模块进行更新，而不会重新加载整个应用。这意味着只有修改过的模块会触发新的 HTTP 请求。这样可以减少不必要的网络请求和提高开发体验。
     4. **文件名哈希**：在生产模式下，Vite 会为构建后的文件添加内容哈希，这样在文件内容发生变化时，其文件名也会发生变化。这可以确保浏览器缓存的文件始终是最新的版本。

